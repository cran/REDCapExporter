<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Peter DeWitt" />


<title>REDCapExporter</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">REDCapExporter</h1>
<h3 class="subtitle">Building R Data Packages from REDCap Projects</h3>
<h4 class="author">Peter DeWitt</h4>


<div id="TOC">
<ul>
<li><a href="#exporting-a-redcap-project-to-a-r-data-package"><span class="toc-section-number">1</span> Exporting a REDCap Project to a R Data Package</a>
<ul>
<li><a href="#details-on-exported-files"><span class="toc-section-number">1.1</span> Details on exported Files</a></li>
<li><a href="#using-the-exported-package"><span class="toc-section-number">1.2</span> Using the Exported Package</a></li>
</ul></li>
<li><a href="#session-info"><span class="toc-section-number">2</span> Session Info</a></li>
</ul>
</div>

<p>The purpose of this vignette is to show how to export a REDCap project into a R data package. Please read</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">vignette</span>(<span class="dt">topic =</span> <span class="st">&quot;api&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;REDCapExporter&quot;</span>)</span></code></pre></div>
<p>for details on using the REDCap API to export the contents of a REDCap project. This vignette will assume you are able to call <code>export_core</code> successfully. For the purpose of this vignette, the data set</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">data</span>(avs_raw_core, <span class="dt">package =</span> <span class="st">&quot;REDCapExporter&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">str</span>(avs_raw_core)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">## List of 4</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">##  $ project_raw : &#39;rcer_raw_project&#39; chr &quot;project_id,project_title,creation_time,production_time,in_production,project_language,purpose,purpose_other,pro&quot;| __truncated__</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">##   ..- attr(*, &quot;Content-Type&quot;)= Named chr [1:2] &quot;text/csv&quot; &quot;utf-8&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">##   .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;&quot; &quot;charset&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">##   ..- attr(*, &quot;accessed&quot;)= POSIXct[1:1], format: &quot;2020-02-25 15:11:16&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">##  $ metadata_raw: &#39;rcer_raw_metadata&#39; chr &quot;field_name,form_name,section_header,field_type,field_label,select_choices_or_calculations,field_note,text_valid&quot;| __truncated__</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">##   ..- attr(*, &quot;Content-Type&quot;)= Named chr [1:2] &quot;text/csv&quot; &quot;utf-8&quot;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">##   .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;&quot; &quot;charset&quot;</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">##   ..- attr(*, &quot;accessed&quot;)= POSIXct[1:1], format: &quot;2020-02-25 15:11:17&quot;</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">##  $ user_raw    : &#39;rcer_raw_user&#39; chr &quot;username,email,firstname,lastname,expiration,data_access_group,data_access_group_id,design,user_rights,data_acc&quot;| __truncated__</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">##   ..- attr(*, &quot;Content-Type&quot;)= Named chr [1:2] &quot;text/csv&quot; &quot;utf-8&quot;</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">##   .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;&quot; &quot;charset&quot;</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">##   ..- attr(*, &quot;accessed&quot;)= POSIXct[1:1], format: &quot;2020-02-25 15:11:17&quot;</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">##  $ record_raw  : &#39;rcer_raw_record&#39; chr &quot;record_id,uniform_number,firstname,lastname,hof,nationality,position,birthdate,height,weight,shoots,catches,exp&quot;| __truncated__</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">##   ..- attr(*, &quot;Content-Type&quot;)= Named chr [1:2] &quot;text/csv&quot; &quot;utf-8&quot;</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">##   .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;&quot; &quot;charset&quot;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">##   ..- attr(*, &quot;accessed&quot;)= POSIXct[1:1], format: &quot;2020-02-25 15:11:17&quot;</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">##  - attr(*, &quot;class&quot;)= chr &quot;rcer_rccore&quot;</span></span></code></pre></div>
<p>is the result of calling <code>export_core</code> to export elements of a REDCap project containing data on the 2000-2001 Stanley Cup Champion Colorado Avalanche.</p>
<div id="exporting-a-redcap-project-to-a-r-data-package" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Exporting a REDCap Project to a R Data Package</h1>
<p>Exporting a REDCap project to a R data package is done with a call to <code>build_r_data_package</code>. If the reader passes the uri for the API and an API token a call to <code>export_core</code> will be made. If you prefer, or as in this case, need to have access to the core contents of the REDCap project available, then you may pass the <code>rcer_rccore</code> object to <code>build_r_data_package</code> to build the skeleton of a R data package.</p>
<p>To build the skeleton of a R data package you will need to pass in the core export from the REDCap project, a path for were the source code for the data package will be written, and some some information about the users. In this context, users are the persons who have, or had, access to the REDCap project and are listed under the UserRights section of the REDCap project. The user data from REDCap is used to construct the Author section of the DESCRIPTION file for the R data package to be constructed. By default, all users are listed as ‘contributors’. Modification of the roles can be provide by a named list object. In the example below, the user dewittp is going to assigned the creator and author role. To be a valid R package, at least one user will need to have the creator role assigned.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>temppath &lt;-<span class="st"> </span><span class="kw">tempdir</span>()</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">build_r_data_package</span>(<span class="dt">x =</span> avs_raw_core,</span>
<span id="cb3-3"><a href="#cb3-3"></a>                     <span class="dt">path =</span> temppath,</span>
<span id="cb3-4"><a href="#cb3-4"></a>                     <span class="dt">author_roles =</span> <span class="kw">list</span>(<span class="dt">dewittp =</span> <span class="kw">c</span>(<span class="st">&quot;cre&quot;</span>, <span class="st">&quot;aut&quot;</span>)))</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">## Creating source package at /var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T//Rtmpb2t7Vz/rcd14465</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">## Updating rcd14465 documentation</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">## First time using roxygen2. Upgrading automatically...</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">## Updating roxygen version in /private/var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T/Rtmpb2t7Vz/rcd14465/DESCRIPTION</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">## Loading rcd14465</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">## Writing NAMESPACE</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">## Writing project.Rd</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">## Writing metadata.Rd</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">## Writing user.Rd</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">## Writing record.Rd</span></span></code></pre></div>
<p>The resulting directory is:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>fs<span class="op">::</span><span class="kw">dir_tree</span>(temppath)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">## /var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T//Rtmpb2t7Vz</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">## ├── callr-env-39d97edbae9b</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">## └── rcd14465</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">##     ├── DESCRIPTION</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">##     ├── LICENSE</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">##     ├── NAMESPACE</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">##     ├── R</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">##     │   └── datasets.R</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">##     ├── data</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">##     │   ├── metadata.rda</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">##     │   ├── project.rda</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">##     │   ├── record.rda</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">##     │   └── user.rda</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">##     ├── inst</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">##     │   └── raw-data</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">##     │       ├── metadata.rds</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">##     │       ├── project.rds</span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">##     │       ├── record.rds</span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">##     │       └── user.rds</span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">##     └── man</span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">##         ├── metadata.Rd</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">##         ├── project.Rd</span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">##         ├── record.Rd</span></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co">##         └── user.Rd</span></span></code></pre></div>
<div id="details-on-exported-files" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> Details on exported Files</h2>
<p>First, the package directory name. Exported packages from <em>REDCapExporter</em> will have the directory name rcd<package-id>. This name is also used in the DESCRIPTION file.</p>
<p>The DESCRIPTION file is</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>prj_dir &lt;-<span class="st"> </span><span class="kw">list.dirs</span>(temppath)</span>
<span id="cb5-2"><a href="#cb5-2"></a>prj_dir &lt;-<span class="st"> </span>prj_dir[<span class="kw">grepl</span>(<span class="st">&quot;/rcd</span><span class="ch">\\</span><span class="st">d+$&quot;</span>, prj_dir)]</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw">t</span>(<span class="kw">read.dcf</span>(<span class="kw">paste</span>(prj_dir, <span class="st">&quot;DESCRIPTION&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>)))</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">##                 [,1]                                                                                                                                                                                                                               </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">## Package         &quot;rcd14465&quot;                                                                                                                                                                                                                         </span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">## Title           &quot;2000-2001 Colorado Avalanche&quot;                                                                                                                                                                                                     </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">## Version         &quot;2020.05.15.10.46&quot;                                                                                                                                                                                                                 </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">## Authors@R       &quot;c(person(given = \&quot;Tell\&quot;, family = \&quot;Bennett\&quot;, email = \&quot;tell.bennett@ucdenver.edu\&quot;, role = c(\&quot;ctb\&quot;)),\nperson(given = \&quot;Peter\&quot;, family = \&quot;DeWitt\&quot;, email = \&quot;peter.dewitt@cuanschutz.edu\&quot;, role = c(\&quot;cre\&quot;, \&quot;aut\&quot;)))&quot;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">## Description     &quot;Data and documentation from the REDCap Project.&quot;                                                                                                                                                                                  </span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">## License         &quot;file LICENSE&quot;                                                                                                                                                                                                                     </span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">## Encoding        &quot;UTF-8&quot;                                                                                                                                                                                                                            </span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">## LazyData        &quot;true&quot;                                                                                                                                                                                                                             </span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">## Suggests        &quot;knitr&quot;                                                                                                                                                                                                                            </span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">## VignetteBuilder &quot;knitr&quot;                                                                                                                                                                                                                            </span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">## RoxygenNote     &quot;7.1.0&quot;</span></span></code></pre></div>
<p>The title comes from the project info recorded in REDCap. The version number is set as the year.month.day.hour.minute of the export. As noted above, the Author field is built from the user data stored in REDCap.</p>
<p>The LICENSE file notes that the package is proprietary and should not be installed or distributed to others who are not authorized to have access to the data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">cat</span>(<span class="kw">readLines</span>(<span class="kw">paste</span>(prj_dir[<span class="dv">1</span>], <span class="st">&quot;LICENSE&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>)), <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">## Proprietary</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">## </span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">## </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">##       Do not distribute to anyone or to machines which are not authorized to hold the data.</span></span></code></pre></div>
<p>The raw data exports are stored as .rds files under inst/raw-data so that these files will be available in R sessions after installing the package.</p>
<p>The data directory has data.table versions of the data sets.</p>
<p>The R/datasets.R file provides the documentation for the data sets which can be accessed in an interactive R session.</p>
</div>
<div id="using-the-exported-package" class="section level2" number="1.2">
<h2 number="1.2"><span class="header-section-number">1.2</span> Using the Exported Package</h2>
<p>Let’s install the package and explore the contents.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>tar_ball &lt;-<span class="st"> </span>devtools<span class="op">::</span><span class="kw">build</span>(<span class="dt">pkg =</span> prj_dir)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">##   </span></span>
<span id="cb7-3"><a href="#cb7-3"></a>   checking <span class="cf">for</span> file ‘<span class="op">/</span>private<span class="op">/</span>var<span class="op">/</span>folders<span class="op">/</span>fc<span class="op">/</span>3hxyq4z94jx_7jr506b8ttlm0000gq<span class="op">/</span>T<span class="op">/</span>Rtmpb2t7Vz<span class="op">/</span>rcd14465<span class="op">/</span>DESCRIPTION’ ...</span>
<span id="cb7-4"><a href="#cb7-4"></a>  </span>
<span id="cb7-5"><a href="#cb7-5"></a>✔  checking <span class="cf">for</span> file ‘<span class="op">/</span>private<span class="op">/</span>var<span class="op">/</span>folders<span class="op">/</span>fc<span class="op">/</span>3hxyq4z94jx_7jr506b8ttlm0000gq<span class="op">/</span>T<span class="op">/</span>Rtmpb2t7Vz<span class="op">/</span>rcd14465<span class="op">/</span>DESCRIPTION’</span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">## </span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  </span>
<span id="cb7-8"><a href="#cb7-8"></a>─  preparing ‘rcd14465’<span class="op">:</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">## </span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="st">  </span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="st">   </span>checking DESCRIPTION meta<span class="op">-</span>information ...</span>
<span id="cb7-12"><a href="#cb7-12"></a>  </span>
<span id="cb7-13"><a href="#cb7-13"></a>✔  checking DESCRIPTION meta<span class="op">-</span>information</span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">## </span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  </span>
<span id="cb7-16"><a href="#cb7-16"></a>─  checking <span class="cf">for</span> LF line<span class="op">-</span>endings <span class="cf">in</span> source and make files and shell scripts</span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">## </span></span>
<span id="cb7-18"><a href="#cb7-18"></a>  </span>
<span id="cb7-19"><a href="#cb7-19"></a>─  checking <span class="cf">for</span> empty or unneeded directories</span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">## </span></span>
<span id="cb7-21"><a href="#cb7-21"></a>  </span>
<span id="cb7-22"><a href="#cb7-22"></a>     NB<span class="op">:</span><span class="st"> </span>this package now depends on <span class="kw">R</span> (<span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.0</span>)</span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">## </span></span>
<span id="cb7-24"><a href="#cb7-24"></a>  </span>
<span id="cb7-25"><a href="#cb7-25"></a>     WARNING<span class="op">:</span><span class="st"> </span>Added dependency on R <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.0</span> because serialized objects <span class="cf">in</span>  serialize<span class="op">/</span>load version <span class="dv">3</span> cannot be read <span class="cf">in</span> older versions of R.  <span class="kw">File</span>(s) containing such objects<span class="op">:</span><span class="st"> </span>‘rcd14465<span class="op">/</span>data<span class="op">/</span>metadata.rda’  ‘rcd14465<span class="op">/</span>data<span class="op">/</span>project.rda’  WARNING<span class="op">:</span><span class="st"> </span>Added dependency on R <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.0</span> because serialized objects <span class="cf">in</span>  serialize<span class="op">/</span>load version <span class="dv">3</span> cannot be read <span class="cf">in</span> older versions of R.  <span class="kw">File</span>(s) containing such objects<span class="op">:</span><span class="st"> </span>‘rcd14465<span class="op">/</span>data<span class="op">/</span>record.rda’  ‘rcd14465<span class="op">/</span>data<span class="op">/</span>user.rda’  WARNING<span class="op">:</span><span class="st"> </span>Added dependency on R <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.0</span> because serialized objects <span class="cf">in</span>  serialize<span class="op">/</span>load version <span class="dv">3</span> cannot be read <span class="cf">in</span> older versions of R.  <span class="kw">File</span>(s) containing such objects<span class="op">:</span><span class="st">  </span>‘rcd14465<span class="op">/</span>inst<span class="op">/</span>raw<span class="op">-</span>data<span class="op">/</span>metadata.rds’  WARNING<span class="op">:</span><span class="st"> </span>Added dependency on R <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.0</span> because serialized objects <span class="cf">in</span>  serialize<span class="op">/</span>load version <span class="dv">3</span> cannot be read <span class="cf">in</span> older versions of R.  <span class="kw">File</span>(s) containing such objects<span class="op">:</span><span class="st"> </span>‘rcd14465<span class="op">/</span>inst<span class="op">/</span>raw<span class="op">-</span>data<span class="op">/</span>project.rds’  WARNING<span class="op">:</span><span class="st"> </span>Added dependency on R <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">5.0</span> because serialized objects <span class="cf">in</span>  serialize<span class="op">/</span>load version <span class="dv">3</span> cannot be read <span class="cf">in</span> older versions of R.  <span class="kw">File</span>(s) containing such objects<span class="op">:</span><span class="st"> </span>‘rcd14465<span class="op">/</span>inst<span class="op">/</span>raw<span class="op">-</span>data<span class="op">/</span>record.rds’  ‘rcd14465<span class="op">/</span>inst<span class="op">/</span>raw<span class="op">-</span>data<span class="op">/</span>user.rds’</span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">## </span></span>
<span id="cb7-27"><a href="#cb7-27"></a>  </span>
<span id="cb7-28"><a href="#cb7-28"></a>─  building ‘rcd14465_<span class="dv">2020</span>.<span class="dv">05</span>.<span class="dv">15</span>.<span class="dv">10</span>.<span class="fl">46.</span>tar.gz’</span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="co">## </span></span>
<span id="cb7-30"><a href="#cb7-30"></a>  </span>
<span id="cb7-31"><a href="#cb7-31"></a>   </span>
<span id="cb7-32"><a href="#cb7-32"></a><span class="co">## </span></span>
<span id="cb7-33"><a href="#cb7-33"></a>tar_ball</span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="co">## [1] &quot;/private/var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T/Rtmpb2t7Vz/rcd14465_2020.05.15.10.46.tar.gz&quot;</span></span>
<span id="cb7-35"><a href="#cb7-35"></a></span>
<span id="cb7-36"><a href="#cb7-36"></a><span class="kw">install.packages</span>(<span class="dt">pkgs =</span> tar_ball, <span class="dt">lib =</span> temppath)</span>
<span id="cb7-37"><a href="#cb7-37"></a><span class="co">## inferring &#39;repos = NULL&#39; from &#39;pkgs&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">library</span>(rcd14465, <span class="dt">lib.loc =</span> temppath)</span></code></pre></div>
<p>The available data sets:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">data</span>(<span class="dt">package =</span> <span class="st">&quot;rcd14465&quot;</span>)<span class="op">$</span>results</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">##      Package   </span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">## [1,] &quot;rcd14465&quot;</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">## [2,] &quot;rcd14465&quot;</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">## [3,] &quot;rcd14465&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">## [4,] &quot;rcd14465&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">##      LibPath                                                              </span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">## [1,] &quot;/private/var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T/Rtmpb2t7Vz&quot;</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">## [2,] &quot;/private/var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T/Rtmpb2t7Vz&quot;</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">## [3,] &quot;/private/var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T/Rtmpb2t7Vz&quot;</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">## [4,] &quot;/private/var/folders/fc/3hxyq4z94jx_7jr506b8ttlm0000gq/T/Rtmpb2t7Vz&quot;</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">##      Item       Title     </span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">## [1,] &quot;metadata&quot; &quot;Metadata&quot;</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">## [2,] &quot;project&quot;  &quot;Project&quot; </span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">## [3,] &quot;record&quot;   &quot;Record&quot;  </span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">## [4,] &quot;user&quot;     &quot;User&quot;</span></span></code></pre></div>
<p>A simple data analysis question: how many goals were scored by position?</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">library</span>(data.table)</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw">as.data.table</span>(record)[, <span class="kw">sum</span>(goals), by =<span class="st"> </span>position]</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">##      position V1</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">## 1:       Goal  0</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">## 2:     Center 93</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">## 3:    Defence 34</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">## 4: Right Wing 72</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">## 5:  Left Wing 71</span></span></code></pre></div>
</div>
</div>
<div id="session-info" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Session Info</h1>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">print</span>(<span class="kw">sessionInfo</span>(), <span class="dt">local =</span> <span class="ot">FALSE</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co">## R version 4.0.0 (2020-04-24)</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co">## Platform: x86_64-apple-darwin17.0 (64-bit)</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">## Running under: macOS Catalina 10.15.4</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">## </span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">## Matrix products: default</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">## BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">## LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">## </span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">## attached base packages:</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="co">## </span></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">## other attached packages:</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">## [1] data.table_1.12.9         rcd14465_2020.05.15.10.46</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="co">## [3] REDCapExporter_0.2.1     </span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co">## </span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co">## loaded via a namespace (and not attached):</span></span>
<span id="cb11-18"><a href="#cb11-18"></a><span class="co">##  [1] Rcpp_1.0.4.6      compiler_4.0.0    remotes_2.1.1     prettyunits_1.1.1</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="co">##  [5] tools_4.0.0       testthat_2.3.2    digest_0.6.25     pkgbuild_1.0.8   </span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="co">##  [9] pkgload_1.0.2     lubridate_1.7.8   evaluate_0.14     memoise_1.1.0    </span></span>
<span id="cb11-21"><a href="#cb11-21"></a><span class="co">## [13] rlang_0.4.6       rstudioapi_0.11   cli_2.0.2         yaml_2.2.1       </span></span>
<span id="cb11-22"><a href="#cb11-22"></a><span class="co">## [17] xfun_0.13         xml2_1.3.2        roxygen2_7.1.0    qwraps2_0.4.2    </span></span>
<span id="cb11-23"><a href="#cb11-23"></a><span class="co">## [21] withr_2.2.0       stringr_1.4.0     knitr_1.28        fs_1.4.1         </span></span>
<span id="cb11-24"><a href="#cb11-24"></a><span class="co">## [25] generics_0.0.2    desc_1.2.0        devtools_2.3.0    rprojroot_1.3-2  </span></span>
<span id="cb11-25"><a href="#cb11-25"></a><span class="co">## [29] glue_1.4.1        R6_2.4.1          processx_3.4.2    fansi_0.4.1      </span></span>
<span id="cb11-26"><a href="#cb11-26"></a><span class="co">## [33] rmarkdown_2.1     sessioninfo_1.1.1 purrr_0.3.4       callr_3.4.3      </span></span>
<span id="cb11-27"><a href="#cb11-27"></a><span class="co">## [37] magrittr_1.5      usethis_1.6.1     backports_1.1.7   ps_1.3.3         </span></span>
<span id="cb11-28"><a href="#cb11-28"></a><span class="co">## [41] ellipsis_0.3.1    htmltools_0.4.0   assertthat_0.2.1  stringi_1.4.6    </span></span>
<span id="cb11-29"><a href="#cb11-29"></a><span class="co">## [45] crayon_1.3.4</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
